---
title: Operrating System -Chapter 2
commentable: false
date: 2023-02-16
modified: true
Edit: 2023-02-16
mathjax: true
mermaid: true
tags: Opertating-System notes
categories: study notes
description: 操作系统学习笔记：进程管理
status: Writing
---

# 经典进程同步问题

## 生产者-消费者问题

### 问题描述

- 一群生产者进程在生产数据，并将此数据提供给一群消费者进程去消费处理
- 为使二者可以并发执行，在它们之间设置了一个具有n个缓冲区的循环缓冲，生产者进程可以将它所生产的数据放入一个缓冲区中，消费者进程可以从一个缓冲区中取得一个数据消费
- 异步运行方式及彼此必须保持同步

### 问题解析

- 空缓冲区与满缓冲区

    - 空缓冲区是指未投放数据或虽曾投放数据但对应数据已被取走的缓冲区
    - 满缓冲区则指已投放数据且对应数据尚未被取走的缓冲区
- 进程同步

    - 当生产者进程要把所生产的数据送入循环缓冲时，首先应检查是否有空缓冲区存在，若有，则可向对应空缓冲区中投放数据，同时通知消费者进程；否则只有等待。
    - 当消费者进程要从循环缓冲中提取数据时，首先应检查是否有满缓冲区存在，若有，则从对应满缓冲区中提取数据，并通知生产者进程，否则只有等待。
- 进程互斥

    缓冲区及其“指针”是临界资源：多个生产者/消费者进程

### 解决方法
    
互斥信号量：临界区的指针，针对于多生产者同时向一个地方放东西

同步信号量：只有生产者生产了东西，消费者才能消费；消费者同理

```
semaphore mutex = 1 //互斥
semaphore empty = n //同步
semaphore full = 0  //同步

producer(){
    while(1){

        生产产品
        P(empty) //检查是否空
        P(mutex)
        放入缓冲区
        V(mutex)
        V(full) //增加一个产品
    }
}

consumer(){
    while(1){
        
        P(full) //检查是否有东西可以用
        P(mutex)
        消耗产品
        V(mutex)
        V(empty) //增加一个空的缓冲区
        使用产品
    }
}
```

### 衍生问题